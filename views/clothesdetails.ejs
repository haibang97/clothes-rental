<!DOCTYPE HTML>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>Stylease - an outfit rental platform</title>
	<meta name="Description" CONTENT="Stylease is a clothes rental platform based in Singapore.">
	<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico">

	<!-- jQuery -->
	<script src="js/jquery-2.0.0.min.js" type="text/javascript"></script>

	<!-- Bootstrap -->
	<script src="js/bootstrap.bundle.min.js" type="text/javascript"></script>
	<link href="css/bootstrap.css?v=1.0" rel="stylesheet" type="text/css" />

	<!-- Styles -->
	<link href="css/styles.css" rel="stylesheet" type="text/css" />

	<!-- Font Awesome -->
	<link href="fonts/fontawesome/css/fontawesome-all.min.css" type="text/css" rel="stylesheet">

	<!-- plugin: fancybox  -->
	<script src="fancybox/fancybox.min.js" type="text/javascript"></script>
	<link href="fancybox/fancybox.min.css" type="text/css" rel="stylesheet">

</head>

<body>

	<!-- HEADER START -->
	<header class="section-header">
		<section class="header-main">
			<div class="container">
				<div class="row align-items-center">

					<!-- LOGO START -->
					<div class="col-lg-3">
						<div class="brand-wrap">
							<a href="/home"><img class="logo" src="images/logo.png"></a>
						</div>
					</div>
					<!-- LOGO END -->

					<!-- SEARCH BAR START -->
					<div class="col-lg-6 col-sm-6">
						<form action="#" class="search-wrap">
							<div class="input-group">
								<input type="text" class="form-control" placeholder="I am looking for...">
								<div class="input-group-append">
									<button class="btn btn-primary" type="submit">
										<i class="fa fa-search"></i>
									</button>
								</div>
							</div>
						</form>
					</div>
					<!-- SEARCH BAR END -->

					<!-- CART / ACCOUNT START -->
					<div class="col-lg-3 col-sm-6">
						<div class="widgets-wrap d-flex justify-content-end">

							<!-- CART START -->
							<div class="widget-header">
								<a href="#" class="icontext">
									<div class="icon-wrap icon-xs bg2 text-secondary"><i
											class="fa fa-shopping-cart"></i></div>
									<div class="text-wrap cart-size">

									</div>
								</a>
							</div>
							<!-- CART END -->

							<!-- ACCOUNT START -->
							<div class="widget-header dropdown">
								<a href="#" class="ml-3 icontext" data-toggle="dropdown" data-offset="20,10">
									<div class="icon-wrap icon-xs bg2 text-secondary"><i class="fa fa-user"></i></div>
									<div class="text-wrap">
										<small>Hello,</small>
										<span>Lou <i class="fa fa-caret-down"></i></span>
									</div>
								</a>
								<div class="dropdown-menu dropdown-menu-right">
									<a class="dropdown-item" href="/home-user">Manage my account</a>
									<a class="dropdown-item" href="/home-user">My orders</a>
									<a class="dropdown-item" href="/home-user">My reviews</a>
									<a class="dropdown-item" href="/home">Logout</a>
								</div>
							</div>
							<!-- ACCOUNT END -->
						</div>
					</div>
					<!-- CART / ACCOUNT END -->
				</div>
			</div>
		</section>

		<!-- NAV BAR START -->
		<nav class="navbar navbar-expand navbar-dark bg-green">
			<div class="container">

				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_nav">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="collapse navbar-collapse" id="main_nav">
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link" href="home">HOME</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="home">ABOUT US</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="home">SUPPORT</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="home">CONTACT US</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>
		<!-- NAV BAR END -->

	</header>
	<!-- HEADER END -->

	<!-- CLOTHES DETAILS START -->
	<section class="section-content bg-beige">
		<div class="container">
			<main class="card-clothesdetails">
				<div class="row no-gutters">

					<aside class="col-sm-3">
						<article class="gallery-wrap">
							<div class="img-big-wrap">
								<div class="model_background">
									<img src="<%= data.CombinedClothes[0].image_link %>" class="model_clothes" />
									<img src="images/clothes/greybg.jpg" />
								</div>
							</div>
						</article>
					</aside>

					<aside class="col-sm-9">
						<article class="card-body">
							<h3 class="title mb-3"><%= data.CombinedClothes[0].type %></h3>
							<dl>
								<dt>Description</dt>
								<dd>
									<p><%= data.CombinedClothes[0].description %></p>
								</dd>
							</dl>
							<dl class="row">
								<dt class="col-sm-2">Perfect for:</dt>
								<dd class="col-sm-10"><%= data.CombinedClothes[0].function %></dd>

								<dt class="col-sm-2">Availability:</dt>
								<dd class="col-sm-10"><%= data.CombinedClothes[0].status %></dd>

								<dt class="col-sm-2">Size:</dt>

								<dd class="col-sm-10">
									<dl class="dlist-inline">
										<dd>
											<!-- <label class="form-check form-check-inline">
												<input class="form-check-input" name="size" id="XS" value="XS"
													type="radio">
												<span class="form-check-label">XS</span>
											</label> -->
											<label class="form-check form-check-inline">
												<input class="form-check-input" name="size" id="S" value="S"
													type="radio">
												<span class="form-check-label">S</span>
											</label>
											<label class="form-check form-check-inline">
												<input class="form-check-input" name="size" id="M" value="M"
													type="radio">
												<span class="form-check-label">M</span>
											</label>
											<label class="form-check form-check-inline">
												<input class="form-check-input" name="size" id="L" value="L"
													type="radio">
												<span class="form-check-label">L</span>
											</label>
											<!-- <label class="form-check form-check-inline">
												<input class="form-check-input" name="size" id="XL" value="XL"
													type="radio">
												<span class="form-check-label">XL</span>
											</label> -->
										</dd>
									</dl>
								</dd>
								<dt class="col-sm-2">
									<button type="button" class="btn btn-primary" data-toggle="modal"
										data-target="#popup" id="addtobag">Add to bag</button>
								</dt>
								</form>

								<!-- POPUP START -->
								<div class="modal fade" id="popup" tabindex="-1" role="dialog" aria-labelledby="popup"
									aria-hidden="true">
									<div class="modal-dialog modal-dialog-centered" role="document">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="exampleModalLabel">Success!</h5>
												<button type="button" class="close" data-dismiss="modal"
													aria-label="Close">
													<span aria-hidden="true">&times;</span>
												</button>
											</div>
											<div class="modal-body">
												Your item has been successfully added into your bag.
											</div>
											<div class="modal-footer">
												<a href="/home-user#filters" class="btn btn-secondary">Add another
													outfit</a>
												<a href="/orders" class="btn btn-green">Proceed to checkout</a>
											</div>
										</div>
									</div>
								</div>
								<!-- POPUP END -->
							</dl>

						</article>
					</aside>
				</div>

				<hr />
				<!-- OUTFIT LOCATION START -->
				<div class="row">
					<div class="col-sm-8" style="float: none; margin: 0 auto; margin-top:30px; margin-bottom: 10px;">
						<div align="center">

							<div class="row">
								<div class="col text-center">
									<h2 class="clothesfilterheadline text-grey">How does this outfit look like in
									</h2>
									<div class="dropdown">
										<select class="btn btn-secondary dropdown-toggle" id="location">
											<option value="" disabled selected hidden>select a location</option>
											<option value="Orchard Road">Orchard Road</option>
											<option value="Zouk">Zouk</option>
											<option value="SMU">SMU</option>
										</select>
									</div>
								</div>
							</div>
							<br />
							<div align="center">
								<button type="submit" class="btn btn-green">Check it out</button>
							</div>
							<br /><br />

							<div class="result"></div>

							<br />
						</div>
					</div>
				</div>
				<br /><br />
				<!-- OUTFIT LOCATION END -->
			</main>
		</div>
	</section>
	<!-- CLOTHES DETAILS END -->

<!-- Load Facebook SDK for JavaScript -->
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      xfbml            : true,
      version          : 'v3.2'
    });
  };

  (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/en_US/sdk/xfbml.customerchat.js';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!-- Your customer chat code -->
<div class="fb-customerchat"
  attribution=setup_tool
  page_id="299401447397224"
  theme_color="#81894e"
  greeting_dialog_display="hide">
</div>

	<!-- FOOTER START -->
	<footer class="section-footer bg-green">
		<div class="container">
			<section class="footer-bottom row text-white">
				<div class="col-sm-6">
					<p>Stylease is a clothes rental platform developed by G3-T4 <br>
						(Bang, Huirong, Nicholas, Timothy, Xavier and Zuo Lin) for the IS213 project.
					</p>
				</div>
			</section>
		</div>
	</footer>
	<!-- FOOTER END -->

</body>

<script type="text/javascript">

	$(document).ready(function () {

		var rows = <%- JSON.stringify(data) %>

		console.log("Start adding items and add in localStorage")

		var clothesBySize = []
		var itemsArray = localStorage.getItem('items') ? JSON.parse(localStorage.getItem('items')) : []
		localStorage.setItem('items', JSON.stringify(itemsArray))

		// Display cart size
		var cart_size = `<small>My Bag</small>
						<span>${itemsArray.length} items</span>`
		$(".cart-size").html(cart_size);

		$('#addtobag').click(function () {
			var size = $("input[name='size']:checked").val();
			rows.CombinedClothes.forEach(function (clothe) {
				if (clothe.size == size) {
					clothesBySize.push(clothe)
				}
			})

			itemsArray.push(clothesBySize[0])
			localStorage.setItem('items', JSON.stringify(itemsArray))
		})

		$('.outfit').submit(function (event) {

			event.preventDefault();

			var location = $('#location option:selected').val();
			console.log(location)
			var host = "http://LAPTOP-M5IE8VM3:8080"
			var body = "/background/"
			var url = host + body + location

			var result = ''
			$.getJSON(url, function (data) {
				var place = data.location
				if (place == "SMU") {
					place = "Singapore Management University"
				}

				var image = data.image

				result += `
							<p class="subheadline">This is how this outfit would look like in <strong>${place}</strong>.</p>
							<div class="location">
								<img src="https://stylease.me/images/locations/model.png" width="15%" class="model_location" />
								<img src="${image}" width="80%"/>
							</div>	`

				$(".result").html(result);
				result = "";

			})
		})
	});

</script>

</html>